# Migration `20200630201032`

This migration has been generated by catherineluse at 6/30/2020, 8:10:32 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Comment" DROP CONSTRAINT IF EXiSTS "Comment_authorHandle_fkey",
ALTER COLUMN "authorHandle" DROP NOT NULL;

ALTER TABLE "public"."Comment" ADD FOREIGN KEY ("authorHandle")REFERENCES "public"."User"("handle") ON DELETE SET NULL  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200628222621..20200630201032
--- datamodel.dml
+++ datamodel.dml
@@ -3,20 +3,20 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Comment {
-  authorHandle    String
+  authorHandle    String?
   createdAt       DateTime   @default(now())
   discussionId    Int
   id              Int        @default(autoincrement()) @id
   parentCommentId Int?
   text            String
   isRootComment   Boolean
-  User            User       @relation(fields: [authorHandle], references: [handle])
+  User            User?      @relation(fields: [authorHandle], references: [handle])
   Discussion      Discussion @relation(fields: [discussionId], references: [id])
   parentComment   Comment?   @relation("CommentToComment_id", fields: [parentCommentId], references: [id])
   childComment    Comment[]  @relation("CommentToComment_id")
 }
```


