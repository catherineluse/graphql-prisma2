# Migration `20200628222303`

This migration has been generated by catherineluse at 6/28/2020, 10:23:03 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Comment" DROP CONSTRAINT IF EXiSTS "Comment_id_fkey",
ADD COLUMN "isRootComment" boolean  NOT NULL ,
ADD COLUMN "parentCommentId" integer   ;

ALTER TABLE "public"."Comment" ADD FOREIGN KEY ("parentCommentId")REFERENCES "public"."Comment"("id") ON DELETE SET NULL  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200628200147..20200628222303
--- datamodel.dml
+++ datamodel.dml
@@ -3,21 +3,23 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Comment {
-  authorHandle  String
-  createdAt     DateTime   @default(now())
-  discussionId  Int
-  id            Int        @id
-  text          String
-  User          User       @relation(fields: [authorHandle], references: [handle])
-  Discussion    Discussion @relation(fields: [discussionId], references: [id])
-  parentComment Comment    @relation("CommentToComment_id", fields: [id], references: [id])
-  childComment  Comment[]  @relation("CommentToComment_id")
+  authorHandle    String
+  createdAt       DateTime   @default(now())
+  discussionId    Int
+  id              Int        @id
+  parentCommentId Int?
+  text            String
+  isRootComment   Boolean
+  User            User       @relation(fields: [authorHandle], references: [handle])
+  Discussion      Discussion @relation(fields: [discussionId], references: [id])
+  parentComment   Comment?   @relation("CommentToComment_id", fields: [parentCommentId], references: [id])
+  childComment    Comment[]  @relation("CommentToComment_id")
 }
 model Community {
   createdAt                DateTime                   @default(now())
```


