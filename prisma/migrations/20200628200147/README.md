# Migration `20200628200147`

This migration has been generated by catherineluse at 6/28/2020, 8:01:47 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."OrganizersOfCommunities" (
"communityUrl" text  NOT NULL ,"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"userHandle" text  NOT NULL ,
    PRIMARY KEY ("communityUrl","userHandle"))

ALTER TABLE "public"."Community" DROP CONSTRAINT IF EXiSTS "Community_creatorHandle_fkey",
DROP COLUMN "creatorHandle",
ADD COLUMN "organizerHandle" text  NOT NULL ;

ALTER TABLE "public"."CreatorsOfCommunities" DROP CONSTRAINT IF EXiSTS "CreatorsOfCommunities_communityUrl_fkey";

ALTER TABLE "public"."CreatorsOfCommunities" DROP CONSTRAINT IF EXiSTS "CreatorsOfCommunities_userHandle_fkey";

ALTER TABLE "public"."OrganizersOfCommunities" ADD FOREIGN KEY ("communityUrl")REFERENCES "public"."Community"("url") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."OrganizersOfCommunities" ADD FOREIGN KEY ("userHandle")REFERENCES "public"."User"("handle") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."Community" ADD FOREIGN KEY ("organizerHandle")REFERENCES "public"."User"("handle") ON DELETE CASCADE  ON UPDATE CASCADE

DROP TABLE "public"."CreatorsOfCommunities";
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200628163229..20200628200147
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Comment {
   authorHandle  String
@@ -20,18 +20,18 @@
 }
 model Community {
   createdAt                DateTime                   @default(now())
-  creatorHandle            String
+  organizerHandle          String
   description              String?
   id                       Int                        @default(autoincrement()) @id
   name                     String
   url                      String                     @unique
-  Creator                  User                       @relation("CreatorsOfCommunities", fields: [creatorHandle], references: [handle])
+  Organizer                User                       @relation("OrganizersOfCommunities", fields: [organizerHandle], references: [handle])
   Subscribers              User[]                     @relation("SubscribersOfCommunities", references: [id])
   Discussion               Discussion[]
   SubscribersOfCommunities SubscribersOfCommunities[]
-  CreatorsOfCommunities    CreatorsOfCommunities[]
+  OrganizersOfCommunities  OrganizersOfCommunities[]
 }
 model Discussion {
   authorHandle String
@@ -64,15 +64,15 @@
   email                    String                     @unique
   name                     String
   handle                   String                     @unique
   Comment                  Comment[]
-  CreatorOfCommunities     Community[]                @relation("CreatorsOfCommunities")
+  OrganizerOfCommunities   Community[]                @relation("OrganizersOfCommunities")
   SubscriberOfCommunities  Community[]                @relation("SubscribersOfCommunities", references: [id])
   Discussion               Discussion[]
   SentMessages             Message[]                  @relation("AuthorsOfMessages")
   ReceivedMessages         Message[]                  @relation("RecipientsOfMessages")
   SubscribersOfCommunities SubscribersOfCommunities[]
-  CreatorsOfCommunities    CreatorsOfCommunities[]
+  OrganizersOfCommunities  OrganizersOfCommunities[]
   AuthorsOfMessages        AuthorsOfMessages[]
   RecipientsOfMessages     RecipientsOfMessages[]
 }
@@ -89,9 +89,9 @@
   createdAt    DateTime  @default(now())
   @@id([communityUrl, userHandle])
 }
-model CreatorsOfCommunities {
+model OrganizersOfCommunities {
   Community    Community @relation(fields: [communityUrl], references: [url])
   communityUrl String
   User         User      @relation(fields: [userHandle], references: [handle])
   userHandle   String
```


